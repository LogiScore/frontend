import"./DsnmJJEf.js";import"./CjZ9RPhr.js";import{c as we}from"./i-GTZLgc.js";import{aC as he,k as Pe,aD as Se,aE as qe,G as Ee,a0 as ke,a7 as D,a2 as xe,a3 as Ce,c as Ie,f as Ae,a as M,a6 as De,a1 as n,i as Me,aF as Fe,a4 as G,aa as t,a9 as r,ab as i,h as e,a5 as F,ad as b,ae as Oe}from"./jhiWsoka.js";import{l as Te,e as S,s as x}from"./DLQm8ORK.js";import{i as Q}from"./XCZn0Ggh.js";import{r as q,b as E}from"./85Mhv-3I.js";import{s as Le,p as te}from"./CdEA5IGF.js";import{i as Ge}from"./CC58nC6b.js";import{b as Ke}from"./BaQKjlP9.js";import{p as ie}from"./CB5KBH7v.js";import{a as le}from"./BOdw2JvJ.js";function ne(s,l,k=!1){if(s.multiple){if(l==null)return;if(!Pe(l))return Se();for(var p of s.options)p.selected=l.includes(O(p));return}for(p of s.options){var u=O(p);if(qe(u,l)){p.selected=!0;return}}(!k||l!==void 0)&&(s.selectedIndex=-1)}function Ne(s){var l=new MutationObserver(()=>{ne(s,s.__value)});l.observe(s,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),Ee(()=>{l.disconnect()})}function Ue(s,l,k=l){var p=!0;Te(s,"change",u=>{var v=u?"[selected]":":checked",c;if(s.multiple)c=[].map.call(s.querySelectorAll(v),O);else{var o=s.querySelector(v)??s.querySelector("option:not([disabled])");c=o&&O(o)}k(c)}),he(()=>{var u=l();if(ne(s,u,p),p&&u===void 0){var v=s.querySelector(":checked");v!==null&&(u=O(v),k(u))}s.__value=u,p=!1}),Ne(s)}function O(s){return"__value"in s?s.__value:s.value}var je=G('<div class="error-message svelte-1e42tya"> </div>'),ze=G('<form class="auth-form svelte-1e42tya"><div class="form-group svelte-1e42tya"><label for="signin-email" class="svelte-1e42tya">Email</label> <input type="email" id="signin-email" required placeholder="Enter your email" class="svelte-1e42tya"/></div> <div class="form-group svelte-1e42tya"><label for="signin-password" class="svelte-1e42tya">Password</label> <input type="password" id="signin-password" required placeholder="Enter your password" class="svelte-1e42tya"/></div> <button type="submit" class="btn-primary svelte-1e42tya"> </button></form>'),Be=G('<form class="auth-form svelte-1e42tya"><div class="form-group svelte-1e42tya"><label for="signup-name" class="svelte-1e42tya">Full Name *</label> <input type="text" id="signup-name" required placeholder="Enter your full name" class="svelte-1e42tya"/></div> <div class="form-group svelte-1e42tya"><label for="signup-email" class="svelte-1e42tya">Email *</label> <input type="email" id="signup-email" required placeholder="Enter your email" class="svelte-1e42tya"/></div> <div class="form-group svelte-1e42tya"><label for="signup-company" class="svelte-1e42tya">Company (Optional)</label> <input type="text" id="signup-company" placeholder="Enter your company name" class="svelte-1e42tya"/></div> <div class="form-group svelte-1e42tya"><label for="signup-user-type" class="svelte-1e42tya">I am a *</label> <select id="signup-user-type" required class="svelte-1e42tya"><option>Shipper (I need freight forwarding services)</option><option>Freight Forwarder (I provide freight forwarding services)</option></select></div> <div class="form-group svelte-1e42tya"><label for="signup-password" class="svelte-1e42tya">Password *</label> <input type="password" id="signup-password" required placeholder="Create a password" class="svelte-1e42tya"/></div> <div class="form-group svelte-1e42tya"><label for="signup-confirm-password" class="svelte-1e42tya">Confirm Password *</label> <input type="password" id="signup-confirm-password" required placeholder="Confirm your password" class="svelte-1e42tya"/></div> <button type="submit" class="btn-primary svelte-1e42tya"> </button></form>'),He=G('<div class="modal-overlay svelte-1e42tya"><div class="modal-content svelte-1e42tya"><button class="close-button svelte-1e42tya">Ã—</button> <div class="auth-container svelte-1e42tya"><h2 class="svelte-1e42tya"> </h2> <!> <!> <div class="auth-footer svelte-1e42tya"><p class="svelte-1e42tya"> <button class="link-button svelte-1e42tya"> </button></p></div></div></div></div>');function ra(s,l){ke(l,!1);const k=we();let p=ie(l,"isOpen",12,!1),u=ie(l,"defaultMode",8,"signin"),v=D(u()),c=D(!1),o=D(""),_=D({email:"",password:""}),a=D({name:"",email:"",password:"",confirmPassword:"",company:"",userType:"shipper"});function C(){p(!1),k("close")}function oe(){n(v,e(v)==="signin"?"signup":"signin"),n(o,"")}async function ue(){if(!e(_).email||!e(_).password){n(o,"Please fill in all fields");return}n(c,!0),n(o,"");try{await le.signin(e(_).email,e(_).password),C()}catch(m){n(o,m instanceof Error?m.message:"Sign in failed")}finally{n(c,!1)}}async function ve(){if(!e(a).name||!e(a).email||!e(a).password||!e(a).confirmPassword){n(o,"Please fill in all required fields");return}if(e(a).password!==e(a).confirmPassword){n(o,"Passwords do not match");return}if(e(a).password.length<6){n(o,"Password must be at least 6 characters long");return}n(c,!0),n(o,"");try{await le.signup(e(a).email,e(a).password,e(a).name,e(a).company||void 0,e(a).userType),C()}catch(m){n(o,m instanceof Error?m.message:"Sign up failed")}finally{n(c,!1)}}function de(m){m.key==="Escape"&&C()}xe(()=>Me(u()),()=>{n(v,u())}),Ce(),Ge();var R=Ie();S("keydown",Fe,de);var pe=Ae(R);{var ce=m=>{var T=He(),K=t(T),V=t(K),W=r(V,2),N=t(W),fe=t(N,!0);i(N);var X=r(N,2);{var me=f=>{var d=je(),g=t(d,!0);i(d),F(()=>x(g,e(o))),M(f,d)};Q(X,f=>{e(o)&&f(me)})}var Y=r(X,2);{var ye=f=>{var d=ze(),g=t(d),I=r(t(g),2);q(I),i(g);var w=r(g,2),A=r(t(w),2);q(A),i(w);var h=r(w,2),L=t(h,!0);i(h),i(d),F(()=>{h.disabled=e(c),x(L,e(c)?"Signing In...":"Sign In")}),E(I,()=>e(_).email,P=>b(_,e(_).email=P)),E(A,()=>e(_).password,P=>b(_,e(_).password=P)),S("submit",d,te(ue)),M(f,d)},_e=f=>{var d=Be(),g=t(d),I=r(t(g),2);q(I),i(g);var w=r(g,2),A=r(t(w),2);q(A),i(w);var h=r(w,2),L=r(t(h),2);q(L),i(h);var P=r(h,2),j=r(t(P),2);F(()=>{e(a),Oe(()=>{})});var z=t(j);z.value=z.__value="shipper";var ae=r(z);ae.value=ae.__value="forwarder",i(j),i(P);var B=r(P,2),se=r(t(B),2);q(se),i(B);var H=r(B,2),re=r(t(H),2);q(re),i(H);var J=r(H,2),be=t(J,!0);i(J),i(d),F(()=>{J.disabled=e(c),x(be,e(c)?"Creating Account...":"Create Account")}),E(I,()=>e(a).name,y=>b(a,e(a).name=y)),E(A,()=>e(a).email,y=>b(a,e(a).email=y)),E(L,()=>e(a).company,y=>b(a,e(a).company=y)),Ue(j,()=>e(a).userType,y=>b(a,e(a).userType=y)),E(se,()=>e(a).password,y=>b(a,e(a).password=y)),E(re,()=>e(a).confirmPassword,y=>b(a,e(a).confirmPassword=y)),S("submit",d,te(ve)),M(f,d)};Q(Y,f=>{e(v)==="signin"?f(ye):f(_e,!1)})}var Z=r(Y,2),$=t(Z),ee=t($),U=r(ee),ge=t(U,!0);i(U),i($),i(Z),i(W),i(K),i(T),F(()=>{x(fe,e(v)==="signin"?"Sign In":"Create Account"),x(ee,`${e(v)==="signin"?"Don't have an account?":"Already have an account?"} `),x(ge,e(v)==="signin"?"Sign Up":"Sign In")}),S("click",V,C),S("click",U,oe),S("click",K,Le(function(f){Ke.call(this,l,f)})),S("click",T,C),M(m,T)};Q(pe,m=>{p()&&m(ce)})}M(s,R),De()}export{ra as A,Ue as b};
