import"./DsnmJJEf.js";import"./CjZ9RPhr.js";import{c as Ee}from"./i-GTZLgc.js";import{a0 as Me,a1 as o,a2 as re,a3 as Ye,c as Ie,f as ae,a as d,a6 as Le,h as e,i as te,a7 as S,a4 as f,aa as a,a9 as l,ab as r,e as m,ac as z,a5 as A,ad as Oe}from"./jhiWsoka.js";import{e as h,s as _}from"./DLQm8ORK.js";import{i as q}from"./XCZn0Ggh.js";import{b as We,e as ie,i as oe,s as Ne}from"./BaQKjlP9.js";import{s as Re}from"./CdEA5IGF.js";import{i as je}from"./CC58nC6b.js";import{p as ze}from"./CB5KBH7v.js";import{a as Ge,b as le}from"./BOdw2JvJ.js";const He=[{id:"shipper-basic",name:"Shipper Basic",description:"Essential features for small to medium shippers",price:29,currency:"USD",billingCycle:"monthly",userType:"shipper",features:["Access to freight forwarder reviews","Basic search and filtering","Contact information for forwarders","Email support"]},{id:"shipper-premium",name:"Shipper Premium",description:"Advanced features for growing businesses",price:79,currency:"USD",billingCycle:"monthly",userType:"shipper",isPopular:!0,features:["All Basic features","Priority customer support","Advanced analytics and reporting","Custom alerts and notifications","API access for integrations","Dedicated account manager"]},{id:"shipper-enterprise",name:"Shipper Enterprise",description:"Full-featured solution for large enterprises",price:199,currency:"USD",billingCycle:"monthly",userType:"shipper",features:["All Premium features","White-label solutions","Custom integrations","24/7 phone support","Advanced security features","Multi-user management"]},{id:"forwarder-basic",name:"Forwarder Basic",description:"Essential features for freight forwarders",price:49,currency:"USD",billingCycle:"monthly",userType:"forwarder",features:["Company profile listing","Basic review management","Customer inquiry responses","Email support"]},{id:"forwarder-premium",name:"Forwarder Premium",description:"Advanced features for established forwarders",price:99,currency:"USD",billingCycle:"monthly",userType:"forwarder",isPopular:!0,features:["All Basic features","Advanced analytics dashboard","Review response automation","Priority listing placement","Marketing tools and insights","Dedicated account manager"]},{id:"forwarder-enterprise",name:"Forwarder Enterprise",description:"Complete solution for large forwarders",price:299,currency:"USD",billingCycle:"monthly",userType:"forwarder",features:["All Premium features","Custom branding options","Advanced API access","24/7 phone support","Multi-location management","Advanced dispute resolution tools"]}];function G(E){return He.filter(x=>x.userType===E)}var Je=f('<div class="popular-badge svelte-pmf0sq">Most Popular</div>'),Ke=f('<li class="svelte-pmf0sq"> </li>'),Qe=f('<div><!> <h4 class="plan-name svelte-pmf0sq"> </h4> <div class="plan-price svelte-pmf0sq"><span class="currency svelte-pmf0sq">$</span> <span class="amount svelte-pmf0sq"> </span> <span class="period svelte-pmf0sq">/month</span></div> <p class="plan-description svelte-pmf0sq"> </p> <ul class="plan-features svelte-pmf0sq"></ul></div>'),Ve=f('<div class="plans-grid svelte-pmf0sq"></div>'),Xe=f('<p class="no-plans svelte-pmf0sq">No plans available for your user type.</p>'),Ze=f('<div class="user-info svelte-pmf0sq"><p class="svelte-pmf0sq">Welcome, <strong> </strong>!</p> <p class="svelte-pmf0sq">You are registered as a <strong> </strong>.</p></div> <div class="plans-container svelte-pmf0sq"><h3 class="svelte-pmf0sq"> </h3> <!></div>',1),$e=f('<div class="login-required svelte-pmf0sq"><p>You must be logged in to view subscription plans.</p> <button class="btn-primary svelte-pmf0sq">Sign In</button></div>'),es=f('<div class="error-message svelte-pmf0sq"> </div>'),ss=f('<div class="success-message svelte-pmf0sq"> </div>'),rs=f('<div class="modal-footer svelte-pmf0sq"><button class="btn-secondary svelte-pmf0sq">Cancel</button> <button class="btn-primary svelte-pmf0sq"> </button></div>'),as=f('<div class="modal-overlay svelte-pmf0sq"><div class="modal-content svelte-pmf0sq"><div class="modal-header svelte-pmf0sq"><h2 class="svelte-pmf0sq">Upgrade Your Subscription</h2> <button class="close-btn svelte-pmf0sq">&times;</button></div> <div class="modal-body svelte-pmf0sq"><!> <!> <!></div> <!></div></div>');function fs(E,x){Me(x,!1);let P=ze(x,"isOpen",12,!1);Ee();let n=S(null),w=S(!1),g=S(""),T=S(""),s=S({user:null,token:null,isLoading:!1,error:null});Ge.subscribe(c=>{o(s,c)});let k=S([]);async function ne(){if(!(!e(s).user||!e(s).token))try{const c=await le.getSubscriptionPlans(e(s).token);o(k,c.plans.map(p=>({id:p.id,name:p.name,description:p.description,price:p.price,currency:p.currency,billingCycle:p.billing_cycle,features:p.features,userType:e(s).user.user_type,isPopular:p.is_popular||!1})))}catch(c){console.error("Failed to load plans from backend:",c),o(k,G(e(s).user.user_type))}}function U(){P(!1),ce()}function ce(){o(n,null),o(g,""),o(T,"")}function pe(c){o(n,c),o(g,"")}async function ue(){if(!e(n)){o(g,"Please select a plan");return}if(!e(s).user){o(g,"You must be logged in to upgrade");return}if(e(s).user.user_type!==e(n).userType){o(g,`This plan is only available for ${e(n).userType}s`);return}o(w,!0),o(g,""),o(T,"");try{const c=await le.createSubscription(e(n).id,e(n).name,e(n).userType,e(s).token);o(T,c.message||`Successfully upgraded to ${e(n).name}!`),e(s).user&&Oe(s,e(s).user.subscription_tier=e(n).name.toLowerCase().replace(" ","_")),setTimeout(()=>{U()},2e3)}catch(c){o(g,c.message||"Failed to upgrade subscription")}finally{o(w,!1)}}re(()=>(te(P()),e(s)),()=>{P()&&e(s).user&&e(s).token&&ne()}),re(()=>(e(s),te(P()),G),()=>{e(s).user&&!P()&&o(k,G(e(s).user.user_type))}),Ye(),je();var H=Ie(),ve=ae(H);{var de=c=>{var p=as(),M=a(p),Y=a(M),me=l(a(Y),2);r(Y);var I=l(Y,2),J=a(I);{var fe=t=>{var i=Ze(),u=ae(i),y=a(u),B=l(a(y)),Pe=a(B,!0);r(B),z(),r(y);var Q=l(y,2),V=l(a(Q)),we=a(V,!0);r(V),z(),r(Q),r(u);var X=l(u,2),L=a(X),ke=a(L);r(L);var Ce=l(L,2);{var Se=C=>{var D=Ve();ie(D,5,()=>e(k),oe,(xe,v)=>{var F=Qe();let Z;var $=a(F);{var Te=b=>{var R=Je();d(b,R)};q($,b=>{e(v),m(()=>e(v).isPopular)&&b(Te)})}var O=l($,2),Ue=a(O,!0);r(O);var W=l(O,2),ee=l(a(W),2),De=a(ee,!0);r(ee),z(2),r(W);var N=l(W,2),Fe=a(N,!0);r(N);var se=l(N,2);ie(se,5,()=>(e(v),m(()=>e(v).features)),oe,(b,R)=>{var j=Ke(),Be=a(j,!0);r(j),A(()=>_(Be,e(R))),d(b,j)}),r(se),r(F),A(b=>{Z=Ne(F,1,"plan-card svelte-pmf0sq",null,Z,b),_(Ue,(e(v),m(()=>e(v).name))),_(De,(e(v),m(()=>e(v).price))),_(Fe,(e(v),m(()=>e(v).description)))},[()=>({selected:e(n)?.id===e(v).id})]),h("click",F,()=>pe(e(v))),d(xe,F)}),r(D),d(C,D)},Ae=C=>{var D=Xe();d(C,D)};q(Ce,C=>{e(k),m(()=>e(k).length>0)?C(Se):C(Ae,!1)})}r(X),A(()=>{_(Pe,(e(s),m(()=>e(s).user.username))),_(we,(e(s),m(()=>e(s).user.user_type))),_(ke,`Available Plans for ${e(s),m(()=>e(s).user.user_type)??""}s`)}),d(t,i)},_e=t=>{var i=$e(),u=l(a(i),2);r(i),h("click",u,U),d(t,i)};q(J,t=>{e(s),m(()=>e(s).user)?t(fe):t(_e,!1)})}var K=l(J,2);{var ge=t=>{var i=es(),u=a(i,!0);r(i),A(()=>_(u,e(g))),d(t,i)};q(K,t=>{e(g)&&t(ge)})}var ye=l(K,2);{var be=t=>{var i=ss(),u=a(i,!0);r(i),A(()=>_(u,e(T))),d(t,i)};q(ye,t=>{e(T)&&t(be)})}r(I);var he=l(I,2);{var qe=t=>{var i=rs(),u=a(i),y=l(u,2),B=a(y,!0);r(y),r(i),A(()=>{u.disabled=e(w),y.disabled=e(w),_(B,(e(w),e(n),m(()=>e(w)?"Processing...":`Upgrade to ${e(n).name}`)))}),h("click",u,U),h("click",y,ue),d(t,i)};q(he,t=>{e(n),e(s),m(()=>e(n)&&e(s).user)&&t(qe)})}r(M),r(p),h("click",me,U),h("click",M,Re(function(t){We.call(this,x,t)})),h("click",p,U),d(c,p)};q(ve,c=>{P()&&c(de)})}d(E,H),Le()}export{fs as S,G as g};
